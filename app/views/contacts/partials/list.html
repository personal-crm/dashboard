<div class="widget">
  <div class="widget-header">
    <i class="fa fa-users"></i> Contacts ({{filtered.length}})
    <button type="button" class="btn btn-sm btn-success pull-right" ng-click="crud.fn.create()" style="margin-left: 10px;"><i class="fa fa-plus"></i> New contact</button>
    <input type="text" class="form-control input-sm pull-right" placeholder="Search ..." ng-model="search">
    <div class="clearfix"></div>
  </div>
  <div class="widget-body no-padding">
    <rd-loading ng-show="crud.data.status.loading && !(crud.data.elts && crud.data.elts.length > 0)"></rd-loading>
    <div class="alert alert-danger" role="alert" ng-show="crud.data.status.error"><strong>Error!</strong> {{crud.data.status.error}}</div>
    <div class="table-responsive" ng-show="crud.data.elts && crud.data.elts.length > 0">
      <table class="table table-hover">
        <thead>
          <tr>
            <th sort="crud.data.currentSort" name="firstName" ng-click="crud.fn.sort('firstName')">First Name</th>
            <th sort="crud.data.currentSort" name="lastName" ng-click="crud.fn.sort('lastName')">Last Name</th>
            <th sort="crud.data.currentSort" name="email" ng-click="crud.fn.sort('email')">Email</th>
            <th sort="crud.data.currentSort" name="accountId" ng-click="crud.fn.sort('accountId')">Account</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="elt in filtered = (crud.data.elts | filter:search)" ng-click="crud.fn.toggle(elt)" ng-class="{active: crud.data.selectedElt && elt.objectId === crud.data.selectedElt.objectId}">
            <td>{{elt.firstName}}</td>
            <td>{{elt.lastName}}</td>
            <td><a href="mailto:{{elt.email}}">{{elt.email}}</a></td>
            <td><account-name id="elt.accountId"></account-name></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>